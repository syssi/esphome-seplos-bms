<<: !include esp8266-intra-communication-example-debug.yaml

interval:
  - interval: 4s
    then:
      # >>> ~2001465A0000FD9D\r
      # <<< ~2001465AC04000010CE10CDE0B5C0B53FFFE14983FC26D600246149A00000000000003028010EFE8\r
      - lambda: |-
          id(battery_bank0).on_seplos_modbus_data({
            0x20, 0x01, 0x46, 0x5A, 0x00, 0x00
          });
          id(battery_bank0).on_seplos_modbus_data({
            0x20, 0x01, 0x46, 0x5A, 0xC0, 0x40, 0x00, 0x01, 0x0C, 0xE1, 0x0C, 0xDE, 0x0B, 0x5C,
            0x0B, 0x53, 0xFF, 0xFE, 0x14, 0x98, 0x3F, 0xC2, 0x6D, 0x60, 0x02, 0x46, 0x14, 0x9A,
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x02, 0x80, 0x10
          });

      - delay: 2s

      # >>> ~2002465A0000FD9C\r
      # <<< ~2002465AC04000010CE00CDD0B620B5A0001149741236D600253149700000000000003028010F072\r
      - lambda: |-
          id(battery_bank1).on_seplos_modbus_data({
            0x20, 0x02, 0x46, 0x5A, 0x00, 0x00
          });
          id(battery_bank1).on_seplos_modbus_data({
            0x20, 0x02, 0x46, 0x5A, 0xC0, 0x40, 0x00, 0x01, 0x0C, 0xE0, 0x0C, 0xDD, 0x0B, 0x62,
            0x0B, 0x5A, 0x00, 0x01, 0x14, 0x97, 0x41, 0x23, 0x6D, 0x60, 0x02, 0x53, 0x14, 0x97,
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x02, 0x80, 0x10
          });
